## autovacuumã¯ã€Œãƒ†ãƒ¼ãƒ–ãƒ«ã€ã”ã¨ã«è¨­å®šã§ãã‚‹
ã¾ãšã€ä»¥ä¸‹ã®é …ç›®ã‚’`postgresql.conf`ã§è¨­å®šã™ã‚‹ã€‚
```conf
autovacuum = on
autovacuum_vacuum_threshold = 50
autovacuum_vacuum_scale_factor = 0.1
autovacuum_analyze_threshold = 50
autovacuum_analyze_scale_factor = 0.1
default_statistics_target= 100
```
`CREATE TABLE` ã‚„ `ALTER TABLE`ã§ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã™ã‚‹ã€‚
```sql
CREATE TABLE employees (
    id serial PRIMARY KEY,
    name text,
    department text,
    salary numeric
)
WITH (
    autovacuum_enabled = true,
    autovacuum_vacuum_threshold = 50,
    autovacuum_vacuum_scale_factor = 0.1,
    autovacuum_analyze_threshold = 50,
    autovacuum_analyze_scale_factor = 0.1,
    toast.autovacuum_enabled = true  -- TOASTãƒ†ãƒ¼ãƒ–ãƒ«ã«ã‚‚æœ‰åŠ¹
);
```
**ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°æ•°**(`default_statistics_target`)ã¯ã€**SET STATISTICS**ã‚³ãƒãƒ³ãƒ‰ã§ğŸ”´ã‚«ãƒ©ãƒ å˜ä½ğŸ”´ã§æŒ‡å®šã™ã‚‹ã€‚
```
ALTER TABLE employees ALTER COLUMN salary SET STATISTICS 100;
```


## autovacuumã¯ã€ŒVACUUMã€ã¨ã€ŒANALYZEã€ã‚’è‡ªå‹•ã§è¡Œã†
- launcherãƒ—ãƒ­ã‚»ã‚¹ãŒã€naptimeã”ã¨ã«ã€workerãƒ—ãƒ­ã‚»ã‚¹ã‚’èµ·å‹•ã™ã‚‹ã€‚

<img width="800px" src="https://github.com/user-attachments/assets/4165ef33-38dd-4cb1-9a8d-bbd3c4eee9a0" />
