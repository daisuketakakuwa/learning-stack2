## 統計情報は主に２種類
- 統計情報コレクタ が集めるもの【**アクセス統計情報**】
- VACUUM で集めるもの

今回の話でいうと「**アクセス統計情報**」の話。

<img width="700px" height="1012" alt="image" src="https://github.com/user-attachments/assets/298384c1-39b1-4a0d-8181-5996aacadab0" />

### pg_stat_activity（ユーザーの活動状況）
<img width="700px" height="846" alt="image" src="https://github.com/user-attachments/assets/3475de80-2ebb-4e10-9b51-bccda48f0d73" />

### pg_stat_database（DBの稼働状況）
<img width="700px" height="848" alt="image" src="https://github.com/user-attachments/assets/3583fb15-86e5-4929-a633-b23934cdaa65" />

#### tup_fetched と tup_returnedとは
<img width="700px" height="854" alt="image" src="https://github.com/user-attachments/assets/02676b1f-eca6-4b02-afdb-1dd8d66918df" />
<img width="700px" height="872" alt="image" src="https://github.com/user-attachments/assets/8d06a9c2-cbc3-4d14-9de2-7f8c8d13b21e" />

### pg_stat_all_tables（pg_stat_user_tables＋システムテーブル）
✅**テーブルごとのSeqScan回数、IndexScan回数はここで確認できる**
<img width="700px" height="714" alt="image" src="https://github.com/user-attachments/assets/58118cb4-fc62-409c-b0ad-0cfcbaaaad09" />

### pg_statio_all_tables（pg_statio_user_tables＋システムテーブル）
<img width="700px" height="340" alt="image" src="https://github.com/user-attachments/assets/1f01b13f-41a4-4702-9b33-cf6bff5c6170" />

## pg_stat_bgwriter
ダーディバッファのディスク書き込みは<br>
　✅Checkpointerによる書き込み<br>
　✅BgWriterプロセスによる書き込み<br>
　🔴↑２つとも間に合わず、バックエンドプロセスが直接書き込む。**本当はやりたくない**<br>
この３パターンがある。①②③それぞれの書き込みページか数を↓で確認できる。
```
buffers_checkpoint # Checkpointerが書き込んだページ数
buffers_clean      # BgWriterが書き込んだページ数
buffers_backend    # バックエンドプロセスが直接書き込んだページ数
```




