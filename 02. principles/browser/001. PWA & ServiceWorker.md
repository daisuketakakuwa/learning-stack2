# å‚è€ƒ
https://qiita.com/y_fujieda/items/f9e765ac9d89ba241154#%E7%99%BB%E9%8C%B2
https://jakearchibald.com/2014/offline-cookbook/#the-cache-machine---when-to-store-resources

# ã¾ãˆãŒã
é›°å›²æ°—ã§ã•ãˆã‚‚ã‚ˆãã‚ã‹ã£ã¦ã„ãªã„ã€ŒPWAã€ã€ŒServiceWorkerã€ã€ŒSWRã€ã«ã¤ã„ã¦æœ¬ç¨¿ã§ã¾ã¨ã‚ã¦ã„ãã€‚

# PWA(ProgressiveãªWebã‚¢ãƒ—ãƒª)ã¨ã¯
âœ…PWA = Progressive Web Applications.<br>
âœ…**Nativeã‚¢ãƒ—ãƒªã®ã‚ˆã†ã«å‹•ãWebã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³**ã€‚<br>
å‚è€ƒ: [What are Progressive Web Apps?](https://web.dev/i18n/en/what-are-pwas/)

**Native(Platform-specific) applications**
- launch on the **STANDALONE** device.ï¼ˆPC/iPhone/iPadã«InstallãŒå¿…è¦ï¼‰
- **works WITHOUT network.**
- can read and write files from the local file system, access hardware connected via USB, serial port, or bluetooth.

**Web applications**
- Just hit url on **ANY** browser.ï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ãŒã‚ã‚Œã°ã©ã®ç«¯æœ«ã§ã‚‚ğŸ‘ï¼‰
- **No Network, No Web Applications.**
- can read and write from the browser.

ğŸ‘‰**Nativeã‚¢ãƒ—ãƒªã®ã‚ˆã†ãªWebã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³**ã¨ã¯
- ã‚¢ãƒ—ãƒªãŒInstallã•ã‚Œã¦ã„ã‚‹ã“ã¨ã€‚(Browserã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã™ã‚‹ã“ã¨ã§å®Ÿç¾)
- ã‚¢ãƒ—ãƒªãŒã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã§ã‚‚å‹•ãã€‚

# Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’Nativeã‚¢ãƒ—ãƒªã®ã‚ˆã†ã«å‹•ã‹ã™ã«ã¯
âœ…ãƒ–ãƒ©ã‚¦ã‚¶ â‡” ã‚µãƒ¼ãƒ é–“ã®ã‚„ã‚Šå–ã‚Šã« **ServiceWoker**ã‚’ãƒ—ãƒ­ã‚­ã‚·ã¨ã—ã¦ä»²ä»‹ã•ã›ã¦ã€**Offlineã§ã‚‚å‹•ãã‚ˆã†ã«å¿…è¦ãªHTML/CSS/JSã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥**ã•ã›ã‚Œã°OKğŸ‘

## ServiceWorker
- å®Ÿä½“ã¯ã€Œ**ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§å®Ÿè¡Œã•ã‚Œã‚‹JavaScriptã‚³ãƒ¼ãƒ‰**ã€ã€‚
- Webãƒšãƒ¼ã‚¸(index.html)ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ™‚ã«ã€ServiceWorkerã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆ(ä¾‹:serviceWorker.js)ã‚’èª­ã¿è¾¼ã‚€ã€‚
- ServiceWorkerã«ã¯ã€Œ**ã“ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã«å¯¾ã—ã¦å–å¾—ã—ãŸHTML/CSS/JSãƒ•ã‚¡ã‚¤ãƒ«ã‚’CacheStorageã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã—ã¦ãŠãã€‚ã¾ãšå†ãƒªã‚¯ã‚¨ã‚¹ãƒˆããŸã‚‰ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’è¿”ã—ã¦ã€Onlineã§ã‚ã‚Œã°Backgroundã§æœ€æ–°ã®ã‚‚ã®ã‚’è¿”ã—ã¦ã„ã“ã†(stale-while-revalidate)**ã€ã¿ãŸã„ãªã“ã¨ã‚’ã—ã¦ã‚‚ã‚‰ã†ã€‚
- âœ…**Offlineã§ã‚‚CacheStorageã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã¨ServiceWorkerãŒã‚ã‚Œã°**ã€Webãƒšãƒ¼ã‚¸ã‚’è¡¨ç¤ºã™ã‚‹ã“ã¨ãŒã§ãã‚‹ğŸ‘

## å®Ÿéš›ã«ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦å‹•ã‹ã—ã¦ã¿ã‚‹ã€‚
https://github.com/daisuketakakuwa/vite-ts-learning/blob/main/src/serviceWorker.js

- windowã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ -> ãƒšãƒ¼ã‚¸(ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚¿ãƒ–)ã«ç›¸å½“ã™ã‚‹ã€‚
- window.navigator -> **ãã®ãƒšãƒ¼ã‚¸ã«ãŠã‘ã‚‹**Request/Responseã‚’ç®¡ç†ã™ã‚‹ã‚‚ã®
- window.navigator.serviceworker - ãã®BrowserãŒSWå¯¾å¿œã—ã¦ã„ã‚Œã°å­˜åœ¨ã™ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
- Cache Storage ã« Request / Response ã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥ä¿å­˜ã§ãã‚‹ã€‚ãƒ–ãƒ©ã‚¦ã‚¶ã‚’é–‰ã˜ã¦ã‚‚ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã¯æ¶ˆãˆãªã„ã€‚
- âœ…ServiceWorkerã¯ã€**Cache Storageå†…ã«å„ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®Responseã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã—ã¦ãŠãã€‚**

## ServiceWorkerã®Event
ä»¥ä¸‹ï¼“ã¤ã®Eventã”ã¨ã«ã€addEventListenerã‚’ä½¿ã£ã¦ Cache Storageã«å¯¾ã™ã‚‹èª­å–/æ›´æ–° ã‚’è¡Œã†ã€‚
- installing
- activating
- detecting a network requestï¼ˆfetché–¢æ•°ãŒå‘¼ã°ã‚ŒãŸã¨ãï¼‰

âœ…ServiceWorkerã¯ã€ä½•åº¦ã‚‚ç™»éŒ²

# ã‚¹ãƒãƒ›ã‚¢ãƒ—ãƒªã®ã‚ˆã†ã«ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ã‚‚ã§ãã‚‹ã£ã¦ã‚ã‘ã­

https://qiita.com/y_fujieda/items/f9e765ac9d89ba241154#%E9%80%9A%E7%9F%A5%E3%82%92%E9%80%81%E4%BF%A1

## Offline -> Online ã«ãªã£ãŸã‚‰ã€ãƒ‡ãƒ¼ã‚¿é€ä¿¡ ğŸ”´syncã‚¤ãƒ™ãƒ³ãƒˆ

https://qiita.com/y_fujieda/items/f9e765ac9d89ba241154#background-sync%E7%B7%A8

## Stale-while-revalidate -> Cacheã‚’å‚ç…§ã—ã¤ã¤éåŒæœŸã§ä¸¦è¡Œã—ã¦æœ€æ–°ãƒ‡ãƒ¼ã‚¿å–å¾—

https://jakearchibald.com/2014/offline-cookbook/#stale-while-revalidate
