# ç·æ‹¬
ğŸ‘‰Sending a single IP packetã€"IP header" + "Data"ã€‘<br>
ğŸ‘‰When sending LARGE amounts of data, split it into multiple TCP packetsã€"IP header" + "TCP header" + "Data"ã€‘<br>
ã€€ãƒ»IP Header(Metadata like source IP, destination IP)<br>
ã€€ãƒ»TCP Header(sequence number to reassemble)<br>
ã€€ãƒ»Data

âœ…TCP/UDP built on top of IP.ï¼ˆ**TCP header is included in IP payload**ï¼‰<br>
âœ…HTTP/SMTP/WS built on top of TCP.

<img width="400px" src="https://storage.googleapis.com/zenn-user-upload/a4ff23bda13c-20230408.png" />

HTTP -> application level protocol (what's the content of data? html/css/js/json)<br>
TCP  -> transport layer (**HOW TO TRANSPORT BIG DATA?**)<br>
IP   -> network layer (which computer is destination?)

âœ…TCP benefits<br>
ã€€ğŸ‘Handles the ordering.<br>
ã€€ğŸ‘Resend missing packets using two-way connection.

âœ…Because TCP establishs a two-way connection, <br>
ã€€ğŸ‘A requester **can resend missing packets** using the connection.<br>
ã€€ğŸ‘**Both client and server can send a request -> chatting app works in this way.**

ã€€in other words,

**TCP is ğŸ”´Reliable, but ğŸ”µSlower.**<br>
ğŸ”µTCP have to send additional data which we do NOT need to send with UDP.<br>
ğŸ”µMore latency with TCP than UDP = **TCP takes more time than UDP.**

ğŸ‘‰Even though TCP is slower, but reliability is very important for web requests, emailing and chatting app so that main protocols(HTTP/SMTP/WS) are built on top of TCP.

# Networking Basis

## Idenfity machine by IP address
âœ…The important thing here is that machine is going to be uniquely identifiable with an IP address.<br>
âœ…Public IPã‚¢ãƒ‰ãƒ¬ã‚¹ã¯**32bit**(2^32 = **256^4**)å€‹ = 12æ¡(256.256.256.256)ã§è¡¨ç¾ã™ã‚‹ã€‚<br>
âœ…we can store up to about four billion unique public IP addresses.<br>
ã€€ This is quite limiting because we have more people than this on the earth.<br>
âœ…**IP version 6** actually allows up to **128 bits**.

## How to send data between computers 
âœ…Same with letters, we have "From/IP address" and "To/IP address".<br>
âœ…The rules of sending data over the Internet is called **Internet Protocol(IP)**<br>
âœ…Packet includes "IP Header(Metadata)" and "Data".<br>
Q. When you send a book, it separates into 10 envelops/packet and send them.<br>
ã€€ â†“ **How server reassesmble these 10 envelops in the order?**<br>
  Use TCP(Transmission Control Protocol)

<img width="500px" src="https://storage.googleapis.com/zenn-user-upload/42afdf89caf7-20230209.png" />

## Use TCP to send a big data
When we use TCP, data part further broken up into two portions.<br>
ã€€1. TCP header: metadata about the TCP packet like **sequence number**<br>
ã€€2. TCP packet
 
We're sending IP packets which have an IP header that allows up to communicate between computers.

But when we're sending large amounts of data, we can't put all of that data in a single packet.<br>
So we have to split it up into multiple packets **which uses TCP**.<br>
Once server gets all of packets, **it can reassemble them using sequnce number from TCP header**ğŸ‘

<img width="500px" src="https://storage.googleapis.com/zenn-user-upload/b0a3cfba036e-20230209.png" />

## ğŸ”´Data part â† which we have to worry about
HTTP -> application level protocol (what's the content of data?)<br>
TCP  -> transport layer (how to transport big data?)<br>
IP   -> network layer (which computer is destination?)

## Public IP vs Private IP
âœ…Server needs its public IP address because it need to be accessed from clients.<br>
âœ…Client don't need its public IP address because router has its public IP address instead. But each client **in local network** have each private IP address.<br>

<img width="500px" src="https://storage.googleapis.com/zenn-user-upload/356c7bec169e-20230209.png" />

## Static IP vs Dynamic IP
IPã ã‘ã§ã‚„ã‚Šå–ã‚Šã™ã‚‹ä¸–ç•Œãªã‚‰ã€ä½æ‰€ã§ã‚ã‚‹IPã¯å¤‰ã‚ã‚‰ãšä¸€å®šã§ã‚ã‚‹ã¹ãã€‚<br>
ã—ã‹ã—**Dynamic DNS**ã®ä»•çµ„ã¿ã‚’ä½¿ãˆã°IPãŒå‹•çš„(Dynamic)ã§ã‚ã£ã¦ã‚‚OKã€‚

## Port
Like a **channel of communications**.<br>
âœ…16 bit values. 2^16 = about 65000 ports available.<br>
ğŸ‘‰Many **application layer protocols** have a default port or specified.

```
https://google.com:443
```
â†“ we don't have to speficy the port 443 because the default one is 443.
```
https://google.com
```

# 04. TCP and UDP
Internet Protocol is very **bare-bone** so that we need TCP/UDP.
## TCP(Transfer Control Protocol)
ã€‡**Handles the ordering**<br>
ã€€It's fine when the data didn't arrive in the same order.<br>

ã€‡**Retransmission of lost packets / Packets Retransmission**<br>
ã€€Resend missing packets if some packages do not arrive so that we can get the entire data in the end(:

<img width="500px" src="https://storage.googleapis.com/zenn-user-upload/eb2cd0cc630a-20230408.png" />

### Why Packets Retranmission Possbile?
ğŸ‘‰TCP **establishs a two-way connection** between two machines by **3-way handshake** so that requester can keep knowing the destination IP and resend missing pakcetsğŸ‘

<img width="500px" src="https://storage.googleapis.com/zenn-user-upload/cbff2aa85e7b-20230408.png" />

TCPãƒãƒ³ãƒ‰ã‚·ã‚§ã‚¤ã‚¯ã®ä»•çµ„ã¿ã‚’åˆ©ç”¨ã—ãŸæ”»æ’ƒ<br>
ã€€â†“<br>
SYNãƒ•ãƒ©ãƒƒãƒ‰æ”»æ’ƒ<br>
ï¼šTCPã§ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’ç¢ºç«‹ã™ã‚‹ã€Œ3ã‚¦ã‚§ã‚¤ãƒ»ãƒãƒ³ãƒ‰ã‚·ã‚§ã‚¤ã‚¯ã€ã®ã€ŒSYNãƒªã‚¯ã‚¨ã‚¹ãƒˆã€ã‚’å¤§é‡ã«é€ã‚‹ã€‚<br>
ã€€ã‚µãƒ¼ãƒå´ã‹ã‚‰é€ã‚‰ã‚Œã¦ãã‚‹ã€ŒSYN/ACKãƒ‘ã‚±ãƒƒãƒˆã€ã‚’ç„¡è¦–ã—ãã®ã¾ã¾æ”¾ç½®ã™ã‚‹ã“ã¨ã§ã€<br>
ã€€ã‚µãƒ¼ãƒå´ã‚’å¾…æ©ŸçŠ¶æ…‹ã«ã•ã›ã¦ã‚·ã‚¹ãƒ†ãƒ ã®ãƒªã‚½ãƒ¼ã‚¹ã‚’å¥ªã†æ‰‹æ³•ã€‚

### TCP is ğŸ”µSlower but ğŸ”´Reliable.
For web requests(HTTP), emailing(SMTP) and chatting app(WebSockets), reliabliby is very important so that they are built on top of TCP.

<img width="500px" src="https://storage.googleapis.com/zenn-user-upload/019f98e5ebb0-20230408.png" />

## UDP(User Datagram Protocol)
NO establishing a two-way connection.
Ã— NO handling the ordering
Ã— NO retransmission of lost packets
ã€€â†“ INSTEAD
ã€‡Much faster that TCP. ----- **So we can ignore the ordering and missing packets?**

<img width="500px" src="https://storage.googleapis.com/zenn-user-upload/7b9627a7a7e7-20230408.png" />

Ordering ã¨ Missing packetsãŒã‚ã£ã¦ã‚‚ã€é€Ÿã•ã®æ–¹ã‚’å„ªå…ˆã—ã¦è¦æ±‚ã™ã‚‹ã‚‚ã®
â†’ Live Streamingå‹•ç”»(Youtube Live)

https://www.phileweb.com/review/column/202101/23/1163.html
